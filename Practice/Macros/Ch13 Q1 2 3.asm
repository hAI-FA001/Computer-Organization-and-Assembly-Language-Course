org 100h

.code
MUL_N MACRO N
	IMUL N
ENDM

DIV_N MACRO N
	PUSH DX
	
	MOV DX, 0
	CWD
	IDIV N
	
	POP DX
ENDM

MOD MACRO M, N
	PUSH DX
	
	MOV AX, M
	CWD
	IDIV N
	
	POP DX
ENDM

POWER MACRO N
	PUSH CX
	PUSH DX
	
	MOV DX, 0
	MOV CX, N
	
	LOCAL RAISE
	LOCAL EXIT
	LOCAL OVERFLOWED
	
	RAISE:
		IMUL AX
		CMP DX, 0
		JNE OVERFLOWED
	LOOP RAISE
	JMP EXIT
	
	OVERFLOWED:
		MOV DX, 7FFFh
		INC DX	
	
	EXIT:
		POP DX
		POP CX
ENDM

C_TO_F MACRO C
	PUSH CX
	PUSH DX
	
	LOCAL EXIT
	LOCAL OVERFLOWED
	
	MOV AL, C
	AND AH, 0
	
	MOV CL, 9
	MUL_N CL
	CMP DX, 0
	JNE OVERFLOWED
	
	MOV CX, 5
	DIV_N CX
	
	ADD AX, 32
	JMP EXIT
	
	OVERFLOWED:
		MOV DX, 7FFFh
		INC DX
	
	EXIT:
		POP DX
		POP CX
ENDM



MAIN PROC
	MOV AX, 9
	MOV CX, 5
	
	MOD AX, CX
	
	MOV AX, 36
	
	C_TO_F AL
	
	RET
MAIN ENDP